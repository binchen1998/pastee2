# Pastee 发布指南

## 发布新版本步骤

### 1. 修改版本号

**文件 1：** `Pastee.App/Pastee.App.csproj`

```xml
<Version>3.0.0</Version>  <!-- 改成新版本号 -->
```

**文件 2：** `installer/pastee-setup.iss`

```iss
#define MyAppVersion "3.0.0"  ; 改成新版本号（保持一致）
```

### 2. 发布应用

在项目根目录运行：

```powershell
cd Pastee.App
dotnet publish -c Release -r win-x64 --self-contained true -p:PublishSingleFile=false
```

发布后的文件位于：`Pastee.App\bin\Release\netcoreapp3.1\win-x64\publish\`

### 3. 生成安装包

1. 双击打开 `installer/pastee-setup.iss`（需要先安装 [Inno Setup](https://jrsoftware.org/isdl.php)）
2. 点击菜单 **Build → Compile**（或按 **F9**）
3. 等待编译完成

### 4. 获取安装包

安装包生成在：`dist/Pastee-Setup-{版本号}.exe`

---

## 一键发布脚本（可选）

可以创建一个 `build.ps1` 脚本自动化以上步骤：

```powershell
# 发布应用
cd Pastee.App
dotnet publish -c Release -r win-x64 --self-contained true -p:PublishSingleFile=false
cd ..

# 编译安装包（需要 Inno Setup 在 PATH 中）
& "C:\Program Files (x86)\Inno Setup 6\ISCC.exe" installer\pastee-setup.iss

Write-Host "安装包已生成: dist\Pastee-Setup-*.exe"
```

---

## 注意事项

- 发布前确保所有代码已提交到 Git
- 版本号格式：`主版本.次版本.修订号`（如 3.0.0）
- 两个文件的版本号必须保持一致



